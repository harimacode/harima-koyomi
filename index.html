<html>
    <head>
        <title>播磨国陰陽暦</title>
        <script type="text/javascript">
function set(id, value) {
    document.getElementById(id).innerText = value;
}
function dayOfWeek(dow) {
    switch (dow) {
        case 0: return '日';
        case 1: return '月';
        case 2: return '火';
        case 3: return '水';
        case 4: return '木';
        case 5: return '金';
        case 6: return '土';
    }
    return null;
}
/*!
 * Date オブジェクトからユリウス日を計算します。
 * ユリウス日は浮動小数点数として表現され、
 * 小数点以下の数字は時刻を表します。
 * 
 * この関数では、グレゴリオ暦による計数となるAD 1582年10月15日
 * 以降のみを対象とします。
 */
function juliusDate(date) {
    // TODO 上記値域判定
    
//   Y年M月D日（グレゴリオ暦法による日付）のユリウス日を求めるには、以下の式を
//   使用します。

//        JD=INT(365.25*Y)+INT(Y/400)-INT(Y/100)+INT(30.59*(M-2))+D+1721088

//        ※ M<3 の場合には、Mに12を加え、Yから1を引いてから計算します。
//         また、INT()は () の中の整数部のみを取り出す関数です。
    var year  = date.getFullYear();
    var month = date.getMonth() + 1;
    var day   = date.getDate();
    if (month < 3) {
        month += 12;
        --year;
    }
    alert(year + "/" + month + "/" + day);
    return Math.floor(365.25 * year)
         + Math.floor(year / 400)
         - Math.floor(year / 100)
         + Math.floor(30.59 * (month - 2))
         + day
         + 1721088;
}
function testJuliusDate() {
    //        1994年5月1日 ＝ 2449473
    alert(2449473==juliusDate(new Date(1994,4,1))); // Date#month は 0 origin
}
function main() {    
    var today = new Date();
    var month = today.getMonth() + 1; // 月は 0 始まり
    set("date", month + '/' + today.getDate());
    set('dayOfWeek', dayOfWeek(today.getDay()));
    
    testJuliusDate();
}
        </script>
    </head>
    <body onload="main()">
        <table border="border">
            <tr>
                <th rowspan="2">西暦</th>
                <th rowspan="2">七曜</th>
                <th rowspan="2">旧暦</th>
                <th>六輝</th>
                <th>干支</th>
                <th>九星</th>
                <th>直</th>
                <th>宿</th>
                <th>納音</th>
                <th>天候</th>
                <th>睡眠</th>
                <th>夢</th>
            </tr>
            <tr>
                <th colspan="6">二十四節気</th>
                <th colspan="3">夢や出来事とその印象</th>
            </tr>
            <tr>
                <td rowspan="2" id="date"></td>
                <td rowspan="2" id="dayOfWeek"></td>
                <td rowspan="2" id="oldCalendar"></td>
                <td id="rokki"></td>
                <td id="animalSymbols"></td>
                <td id="kyusei"></td>
                <td id="tyoku"></td>
                <td id="syuku"></td>
                <td id="nattin"></td>
                <td id="weather"></td>
                <td id="sleep"></td>
                <td id="dream"></td>
            </tr>
            <tr>
                <td colspan="6" id="nijusisekki"></td>
                <td colspan="3" id="note"></td>
            </tr>
        </table>
    </body>
</html>
